---
aliases: null
date created: 2022-01-14 21:50
date updated: 2022-01-15 20:54
---

Для чисел есть два тип данных.
`number`  - числа в 64-битном формате [IEEE-754](http://en.wikipedia.org/wiki/IEEE_754-1985), который также называют «числа с плавающей точкой двойной точности» (double precision floating point numbers)
`BigInt`- дают возможность работать с целыми числами произвольной длины. Они нужны достаточно редко и используются в случаях, когда необходимо работать со значениями более чем `253` или менее чем `-253`

В JS нативно поддерживается три системы исчисления. Для других форматов надо использовать  `parseInt`
`0o` - восмеричный
`0b` - двоичный
`0x` - шестнацатиричный

### toString(base)

Метод `num.toString(base)` возвращает строковое представление числа `num` в системе счисления `base`.

`base` может варьироваться от `2` до `36` (по умолчанию `10`).
**base=36** — максимальное основание, цифры могут быть `0..9` или `A..Z`. То есть, используется весь латинский алфавит для представления числа. Забавно, но можно использовать `36`-разрядную систему счисления для получения короткого представления большого числового идентификатора. К примеру, для создания короткой ссылки. Для этого просто преобразуем его в `36`-разрядную систему счисления:

```js
alert( 123456..toString(36) ); // 2n9c
```

Если нам надо вызвать метод непосредственно на числе, как `toString` в примере выше, то нам надо поставить две точки `..` после числа.

Если мы поставим одну точку: `123456.toString(36)`, тогда это будет ошибкой, поскольку синтаксис JavaScript предполагает, что после первой точки начинается десятичная часть. А если поставить две точки, то JavaScript понимает, что десятичная часть отсутствует, и начинается метод. Также можно записать как `(123456).toString(36)`.

### Округление

Одна из часто используемых операций при работе с числами – это округление.

Эти функции охватывают все возможные способы обработки десятичной части:

- `Math.floor` Округление в меньшую сторону: `3.1` становится `3`, а `-1.1` — `-2`.

- `Math.ceil` Округление в большую сторону: `3.1` становится `4`, а `-1.1` — `-1`.

- `Math.round` Округление до ближайшего целого: `3.1` становится `3`, `3.6` — `4`, а `-1.1` — `-1`.

- `Math.trunc` (не поддерживается в Internet Explorer) Производит удаление дробной части без округления: `3.1` становится `3`, а `-1.1` — `-1`.

Если нам надо округлить число до `n-ого` количества цифр в дробной части:

1. Умножить и разделить.

Например, чтобы округлить число до второго знака после запятой, мы можем умножить число на `100`, вызвать функцию округления и разделить обратно.

2. Метод [toFixed(n)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed) округляет число до `n` знаков после запятой и возвращает строковое представление результата. Округляет значение до ближайшего числа, как в большую, так и в меньшую сторону, аналогично методу `Math.round`. Результатом `toFixed` является строка. Если десятичная часть короче, чем необходима, будут добавлены нули в конец строки.

### Неточные вычисления

Внутри JavaScript число представлено в виде 64-битного формата [IEEE-754](https://ru.wikipedia.org/wiki/IEEE_754-1985). Для хранения числа используется 64 бита: 52 из них используется для хранения цифр, 11 из них для хранения положения десятичной точки (если число целое, то хранится 0), и один бит отведён на хранение знака.
Если число слишком большое, оно переполнит 64-битное хранилище, JavaScript вернёт бесконечность:

```js
alert( 1e500 ); // Infinity
```

Другая проблема это потеря точности.

```js
alert( 0.1 + 0.2 ); // 0.30000000000000004
```

Из за того что, данные хранятся в бинарной форме, некоторые дроби имеют период. В десятичных числах это 1/3, нов бинарной форме это другие дроби.
Для борьбы с этим надо пользоваться округлением ( `toFixed(n)`). Такое округление ведет к очень маленькой,  но потери точности.
Метод `toFixed` всегда возвращает строку. Это гарантирует, что результат будет с заданным количеством цифр в десятичной части. Также это удобно для форматирования цен в интернет-магазине `$0.30`. В других случаях можно использовать унарный оператор `+`, чтобы преобразовать строку в число

> Ошибка в точности вычислений для чисел с плавающей точкой сохраняется в любом другом языке, где используется формат IEEE 754, включая PHP, Java, C, Perl, Ruby.

> Забавный пример
>
> ```js
> // Привет! Я – число, растущее само по себе!
> alert( 9999999999999999 ); // покажет 10000000000000000
> ```

Причина та же – потеря точности. Из 64 бит, отведённых на число, сами цифры числа занимают до 52 бит, остальные 11 бит хранят позицию десятичной точки и один бит – знак. Так что если 52 бит не хватает на цифры, то при записи пропадут младшие разряды.
Интерпретатор не выдаст ошибку, но в результате получится «не совсем то число», что мы и видим в примере выше. Как говорится: «как смог, так записал».

> Два нуля

Другим забавным следствием внутреннего представления чисел является наличие двух нулей: `0` и `-0`.
Все потому, что знак представлен отдельным битом, так что, любое число может быть положительным и отрицательным, включая нуль.
В большинстве случаев это поведение незаметно, так как операторы в JavaScript воспринимают их одинаковыми.

### Проверка: isFinite и isNaN

Есть два специальный значения:

- `Infinity` (и `-Infinity`) — особенное численное значение, которое ведёт себя в точности как математическая бесконечность ∞.
- `NaN` представляет ошибку.

Есть ф-и для их проверки

- `isNaN(value)` преобразует значение в число и проверяет является ли оно `NaN`:

```sj
alert( isNaN(NaN) ); // true
alert( isNaN("str") ); // true
```

Значение `NaN` уникально тем, что оно не является равным ни чему другому, даже самому себе

- `isFinite(value)` преобразует аргумент в число и возвращает `true`, если оно является обычным числом, т.е. не `NaN/Infinity/-Infinity`:

```js
alert( isFinite("15") ); // true
alert( isFinite("str") ); // false, потому что специальное значение: NaN
alert( isFinite(Infinity) ); // false, потому что специальное значение: Infinity
```

> Сравнение `Object.is`
> Существует специальный метод [Object.is](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/is), который сравнивает значения примерно как `===`, но более надёжен в двух особых ситуациях:
>
> 1. Работает с `NaN`: `Object.is(NaN, NaN) === true`, здесь он хорош.
> 2. Значения `0` и `-0` разные: `Object.is(0, -0) === false`, это редко используется, но технически эти значения разные.

Во всех других случаях `Object.is(a, b)` идентичен `a === b`.

### parseInt и parseFloat

Для явного преобразования к числу можно использовать `+` или `Number()`. Если строка не является в точности числом, то результат будет `NaN` (Единственное исключение — это пробелы в начале строки и в конце, они игнорируются).

В реальной жизни мы часто сталкиваемся со значениями у которых есть единица измерения, например `"100px"` или `"12pt"`. Для этого есть `parseInt` и `parseFloat`.
Они «читают» число из строки. Если в процессе чтения возникает ошибка, они возвращают полученное до ошибки число. Функция `parseInt` возвращает целое число, а `parseFloat` возвращает число с плавающей точкой:

```js
alert( parseInt('100px') ); // 100
alert( parseFloat('12.5em') ); // 12.5

alert( parseInt('12.3') ); // 12, вернётся только целая часть
alert( parseFloat('12.3.4') ); // 12.3, произойдёт остановка чтения на второй точке 
```

Функции `parseInt/parseFloat` вернут `NaN`, если не смогли прочитать ни одну цифру.

Второй аргумент `parseInt(str, radix)`. Функция `parseInt()` имеет необязательный второй параметр. Он определяет систему счисления, таким образом `parseInt` может также читать строки с шестнадцатеричными числами, двоичными числами и т.д.

### Другие математические функции

В JavaScript встроен объект [Math](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Math), который содержит различные математические функции и константы.

- `Math.random()` Возвращает псевдослучайное число в диапазоне от 0 (включительно) до 1 (но не включая 1)

- `Math.max(a, b, c...)` / `Math.min(a, b, c...)` Возвращает наибольшее/наименьшее число из перечисленных аргументов.

- Math.pow(n, power) Возвращает число `n`, возведённое в степень `power`

---

###### Citation
