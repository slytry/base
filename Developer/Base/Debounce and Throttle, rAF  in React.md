---
aliases: поиск react, поиск
tags: 
date created: Monday, June 27th 2022, 9:39:24 pm
date modified: Monday, June 27th 2022, 10:19:29 pm
---

# Debounce and Throttle in React

Для событий таких как:  window resize, scrolling, user typing into an input. Румно "смягчить" обработчики этих событий.

Если это не сделть есть вероятность получиться на пару секунд зависающее приложение. Техники Debounce и Throttle помогут в управление вызовами ф-и обработчиков.

## Debounce

Весто множественного вызовав ф-и. Ф-я будет вызвана один раз. Пакеты формируюется раз в определенный временной период.

###  `immediate` instead of `leading`

У такой техники есть настройка. Можно ловить первое событие в все последущие за пероидо отбрасывать -  `immediate` (оно же leading). Либо `trailing` - срабатывает в конце периода

## **Throttle**

Делат тоже самое с одной разницей, что есть одной гарантиированное срабатывает один раз в период. Например нам надо динамически подгрузать ajax запросом бесконечную страницу. Debounce будет вызван только когда пользователь прекратит скролить. Но нам надо подгружить новые посты не дожидаясь этого. С Throttle есть гарантия что мы будет регулярно проверять насколько далеко мы от дна

## Имплементация

https://github.com/lodash/lodash/blob/4.8.0-npm/throttle.js

## requestAnimationFrame (rAF)

  
Альтернатива Throttle. Можно представить как  `_.throttle(dosomething, 16)`. Но с гораздо большей верностью. Так как браузерное Api нацелено на это.

Можно это исползовать учитывая все недостатки и достоинства

### Pros

- Стремится к 60 кадрам в секунду (кадры по 16 мс), но внутренне определяет наилучшее время для планирования рендеринга.
- Достаточно простой и стандартный API, не меняющийся в будущем. Меньше обслуживания.

### Cons

- Запуск/отмена rAF — это наша ответственность, в отличие от .debounce или .throttle, где это управляется из нутри
- Если вкладка браузера не активна, она не будет выполняться. Хотя для событий прокрутки, мыши или клавиатуры это не имеет значения.
- Не поддерживаетс очень старыми браузерами
- rAF не поддерживается в node.js, поэтому вы не можете использовать его на сервере для ограничения событий файловой системы.

---

###### References

- [Debouncing and Throttling Explained Through Examples](https://css-tricks.com/debouncing-throttling-explained-examples/)
- [How to Correctly Debounce and Throttle Callbacks in React](https://dmitripavlutin.com/react-throttle-debounce/#2-debouncing-a-callback-the-first-attempt)
