---
tags: 
aliases: 
---
По сути это реализация асинхронности в браузере. Зная ее тонкости мы может избежать некоторых фатальный ошибок кода, и лучше понимать работу кода.

Есть три сущности :
- stack - там где выполняется код
- webapis - там где код ждет
- tast queue - очередь задач

Синхронный код попадает сразу на выполнение.
Асинхронный код попадает в веб апи → ждет → переходит в очередь → выполняется. 
**Случаи**
1. Код очень долго ждал, но не не смог получить ответ. Это нормально. Он не попадет просто в очередь
2. Есть очень затратная задача. Например сложная обработка данных. Она может долно находиться на выполненип в stack и при этом другая ассинхронная задача готова отработать, и стоит в очереди, но она не может выполнится. Когда мы ожидаем чего оно просто не происходит, stack занят. (В таких случаях надо разбиавть задачу на много мелких, это известаня проблемма много поточности, пока это явно не мой уровень)
3. Если запустить ф. timeout со значением 0, но она не отработает как синхронный код. Она попадет в конец очереди. Так первое действие будет — запись в webapis, потом он увидит что там ноль, и поставит в очередь, но в это время остальной код (синхронный) уже начал выполняться. А второе, js по умолчанию в крысу подставляет 4мс, чтобы обеспечить совместимость браузеров.
---
###### Citation
[Event loop](http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D)
https://javascript.info/event-loop
Date: 2021-11-17T10:53
