---
aliases: null
date created: 2022-01-28 12:51
date updated: 2022-01-28 15:07
---

Хук для управления состоянием

```jsx
 import { useState } from 'react';

  function Example() {
    // Объявляем новую переменную состояния, которую назовём "count"
    const [count, setCount] = useState(0);
  
    return (
      <div>
        <p>Вы кликнули {count} раз</p>
        <button onClick={() => setCount(count + 1)}>
          Кликни меня!
        </button>
      </div>
    );
  }
```

`useState` возвращает пару: **текущее** значение состояния и функцию, которая позволяет вам обновлять его.

Единственный аргумент для хука `useState()` - это начальное состояние.

### Особенности
##### Сложновычисляемое начальное значение
```jsx
const [count, setCount] = useState(veryDifficultOperation());

const [count, setCount] = useState(() => veryDifficultOperation());

```

В начальное состояние можно передать ф-и которая делате какие-то сложные вычисления.

Более, если есть верятность что стейт count можен нам не пригодиться, можно обернуть вычисляющую ф-ю в стрелочную ф-ю. В  таком случае вычисления не будут выполнены если состояние count будет не востребованно (то есть вычислиться один раз при монтировании). Если обратиться к setCount раньше чем count, то сложное вычисление вообще никогда не выполниться.

##### Передача ф-и. Ассинхронное изменение

```jsx
const [count, setCount] = useState(0)

setTimeout(() => setCount(count + 1), 1000)
```
При изменение на прямую можно получить непрдесказуемый результат. Реакт сам решает когда оптимальнее всего перерендерить и поменять состояние.

```jsx
const [count, setCount] = useState(0)

setTimeout(() => setCount(count => count + 1), 1000)
```
Если передавать в setCount - будем получать всегда актуальное значение

##### Проблемы useState
Если в состоянии объект, то изменение какого-то поля объекта не приведет к перерисовки. Ссылка на объект одна и таже, а сравнение поверхностное.
1. Можно распоковывать объект через ... (spread) и через запятую перетереть конкретное поле.`ruturn {...state, count: state.count + 1};`
3. Проблема не только в этом, и для сложные структур данных удобнее использовать useReducer


---

###### Citation
