---
aliases: null
date created: 2022-01-20 19:27
date updated: 2022-01-20 20:21
---

Сводная таблица

| Метод                                 | Для чего                                                                                                                 | Особенность                                                                                       |
| ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------- |
| ==Для добавления/удаления элементов== | ==---==                                                                                                                  | ==---==                                                                                           |
| push                                  | добавляет элементы в конец                                                                                               | Можно много эл.                                                                                   |
| pop                                   | извлекает элемент из конца                                                                                               |                                                                                                   |
| shift                                 | извлекает элемент из начала                                                                                              |                                                                                                   |
| unshift                               | добавляет элементы в начало                                                                                              | Можно много эл.                                                                                   |
| splice                                | Умеет всё: добавлять, удалять и заменять элементы.                                                                       |                                                                                                   |
| slice                                 | Возвращает новый массив, в который копирует элементы                                                                     |                                                                                                   |
| concat                                | Создаёт новый массив, в который копирует данные из других массивов                                                       | Есть особенность при работе с объектами. Если это не массив копирует само значение, а не элементы |
| ==Переборы==                          | ==---==                                                                                                                  | ==---==                                                                                           |
| forEach                               |                                                                                                                          |                                                                                                   |
| for..of                               |                                                                                                                          | Есть методы break, continue                                                                       |
| ==Для поиска среди элементов==        | ==---==                                                                                                                  | ==---==                                                                                           |
| findIndex                             | Похож на `find`, но возвращает индекс вместо значения                                                                    |                                                                                                   |
| find/filter                           | Фильтрует элементы через функцию и отдаёт первое/все значения, при прохождении которых через функцию возвращается `true` |                                                                                                   |
| includes                              | Возвращает `true`, если в массиве имеется элемент `value`, в противном случае `false`.                                   |                                                                                                   |
| indexOf/lastIndexOf                   | Ищет `item`, начиная с позиции `pos`, и возвращает его индекс или `-1`, если ничего не найдено                           |                                                                                                   |
| ==Для преобразования массива==        | ==---==                                                                                                                  | ==---==                                                                                           |
| map                                   | создаёт новый массив из результатов вызова `func` для каждого элемента.                                                  |                                                                                                   |
| sort                                  | сортирует массив «на месте», а потом возвращает его.                                                                     |                                                                                                   |
| reverse                               |          «на месте» меняет порядок следования элементов на противоположный и возвращает изменённый массив                                                                                                                 |                                                                                                   |
| split/join                            |         преобразует строку в массив и обратно                                                                                                                 |                                                                                                   |
| reduce                                | вычисляет одно значение на основе всего массива                                                                                                                         |                                                                                                   |
| ==Дополнительно==                     | ==---==                                                                                                                  | ==---==                                                                                           |
| Array.isArray                         | Проверяет, является ли `arr` массивом                                                                                    |                                                                                                   |

### splice

Метод [arr.splice(str)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/splice) – это универсальный «швейцарский нож» для работы с массивами. Умеет всё: добавлять, удалять и заменять элементы.

```js
arr.splice(index[, deleteCount, elem1, ..., elemN])
```

Он начинает с позиции `index`, удаляет `deleteCount` элементов и вставляет `elem1, ..., elemN` на их место. Возвращает массив из удалённых элементов.

Метод `splice` также может вставлять элементы без удаления, для этого достаточно установить `deleteCount` в `0`

В этом и в других методах массива допускается использование отрицательного индекса. Он позволяет начать отсчёт элементов с конца, как тут:

### slice

Метод [arr.slice](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/slice) намного проще, чем похожий на него `arr.splice`.

```js
arr.slice([start], [end])
```

Он возвращает новый массив, в который копирует элементы, начиная с индекса `start` и до `end` (не включая `end`). Оба индекса `start` и `end` могут быть отрицательными. В таком случае отсчёт будет осуществляться с конца массива.

Можно вызвать `slice` и вообще без аргументов: `arr.slice()` создаёт копию массива `arr`. Это часто используют, чтобы создать копию массива для дальнейших преобразований, которые не должны менять исходный массив.

### concat

Метод [arr.concat](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/concat) создаёт новый массив, в который копирует данные из других массивов и дополнительные значения.

```js
arr.concat(arg1, arg2...)
```

Он принимает любое количество аргументов, которые могут быть как массивами, так и простыми значениями.

В результате мы получаем новый массив, включающий в себя элементы из `arr`, а также `arg1`, `arg2` и так далее…

Если аргумент `argN` – массив, то все его элементы копируются. Иначе скопируется сам аргумент.

Обычно он просто копирует элементы из массивов. Другие объекты, даже если они выглядят как массивы, добавляются как есть:

```js
let arr = [1, 2];

let arrayLike = {
  0: "что-то",
  length: 1
};

alert( arr.concat(arrayLike) ); // 1,2,[object Object]
```

Но если объект имеет специальное свойство `Symbol.isConcatSpreadable`, то он обрабатывается `concat` как массив: вместо него добавляются его числовые свойства.

Для корректной обработки в объекте должны быть числовые свойства и `length`:

```js
let arr = [1, 2];

let arrayLike = {
  0: "что-то",
  1: "ещё",
  [Symbol.isConcatSpreadable]: true,
  length: 2
};

alert( arr.concat(arrayLike) ); // 1,2,что-то,ещё
```

### Перебор: forEach

Метод [arr.forEach](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach) позволяет запускать функцию для каждого элемента массива.

```js
arr.forEach(function(item, index, array) {
  // ... делать что-то с item
});
```

> Важно! Разница между методом перебора `forEach` и `for..of`  в том что во втором случае мы можем использовать `break` и `continue`

### Поиск в массиве

##### indexOf/lastIndexOf и includes

Методы [arr.indexOf](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf), [arr.lastIndexOf](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf) и [arr.includes](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/includes) имеют одинаковый синтаксис и делают по сути то же самое, что и их строковые аналоги, но работают с элементами вместо символов:

- `arr.indexOf(item, from)` ищет `item`, начиная с индекса `from`, и возвращает индекс, на котором был найден искомый элемент, в противном случае `-1`.
- `arr.lastIndexOf(item, from)` – то же самое, но ищет справа налево.
- `arr.includes(item, from)` – ищет `item`, начиная с индекса `from`, и возвращает `true`, если поиск успешен.

```js
let arr = [1, 0, false];

alert( arr.indexOf(0) ); // 1
alert( arr.indexOf(false) ); // 2
alert( arr.indexOf(null) ); // -1

alert( arr.includes(1) ); // true
```

Методы используют строгое сравнение `===`. Таким образом, если мы ищем `false`, он находит именно `false`, а не ноль.

##### find и findIndex

Что у нас есть массив объектов. Как нам найти объект с определённым условием?

Здесь пригодится метод [arr.find](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/find).

```js
let result = arr.find(function(item, index, array) {
  // если true - возвращается текущий элемент и перебор прерывается
  // если все итерации оказались ложными, возвращается undefined
});
```

Функция вызывается по очереди для каждого элемента массива:

- `item` – очередной элемент.
- `index` – его индекс.
- `array` – сам массив.

Если функция возвращает `true`, поиск прерывается и возвращается `item`. Если ничего не найдено, возвращается `undefined`.

Например, у нас есть массив пользователей, каждый из которых имеет поля `id` и `name`. Попробуем найти того, кто с `id == 1`:

```js
let users = [
  {id: 1, name: "Вася"},
  {id: 2, name: "Петя"},
  {id: 3, name: "Маша"}
];

let user = users.find(item => item.id == 1);

alert(user.name); // Вася
```

В реальной жизни массивы объектов – обычное дело, поэтому метод `find` крайне полезен.
Метод [arr.findIndex](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex) – по сути, то же самое, но возвращает индекс, на котором был найден элемент, а не сам элемент, и `-1`, если ничего не найдено.

##### filter

Метод `find` ищет один (первый попавшийся) элемент, на котором функция-колбэк вернёт `true`.

На тот случай, если найденных элементов может быть много, предусмотрен метод [arr.filter(fn)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/filter).

Возвращает массив из всех подходящих элементов

```js
let results = arr.filter(function(item, index, array) {
  // если true - элемент добавляется к результату, и перебор продолжается
  // возвращается пустой массив в случае, если ничего не найдено
});
```

### Преобразование массива

##### Map

Метод [arr.map](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/map) является одним из наиболее полезных и часто используемых.

Он вызывает функцию для каждого элемента массива и возвращает массив результатов выполнения этой функции.

```js
let result = arr.map(function(item, index, array) {
  // возвращается новое значение вместо элемента
});
```

##### sort(fn)

Вызов [arr.sort()](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) сортирует массив _на месте_, меняя в нём порядок элементов.

Он возвращает отсортированный массив, но обычно возвращаемое значение игнорируется, так как изменяется сам `arr`.

```js
let arr = [ 1, 2, 15 ];

// метод сортирует содержимое arr
arr.sort();

alert( arr );  // 1, 15, 2
```

**По умолчанию элементы сортируются как строки.**
Буквально, элементы преобразуются в строки при сравнении. Для строк применяется лексикографический порядок, и действительно выходит, что `"2" > "15"`.

Чтобы использовать наш собственный порядок сортировки, нам нужно предоставить функцию в качестве аргумента `arr.sort()`.

```js
function compareNumeric(a, b) {
  if (a > b) return 1;
  if (a == b) return 0;
  if (a < b) return -1;
}

let arr = [ 1, 2, 15 ];

arr.sort(compareNumeric);

alert(arr);  // 1, 2, 15
```

Метод `arr.sort(fn)` реализует общий алгоритм сортировки. Нам не нужно заботиться о том, как он работает внутри (в большинстве случаев это оптимизированная [быстрая сортировка](https://ru.wikipedia.org/wiki/%D0%91%D1%8B%D1%81%D1%82%D1%80%D0%B0%D1%8F_%D1%81%D0%BE%D1%80%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0)). Она проходится по массиву, сравнивает его элементы с помощью предоставленной функции и переупорядочивает их. Всё, что остаётся нам, это предоставить `fn`, которая делает это сравнение.

В процессе работы алгоритм может сравнивать элемент с другими по нескольку раз, но он старается сделать как можно меньше сравнений.

**Функция сравнения может вернуть любое число  и Лучше использовать стрелочные функции**

```js
arr.sort( (a, b) => a - b );
```

##### reverse

Метод [arr.reverse](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse) меняет порядок элементов в `arr` на обратный.

```js
let arr = [1, 2, 3, 4, 5];
arr.reverse();

alert( arr ); // 5,4,3,2,1
```

Он также возвращает массив `arr` с изменённым порядком элементов.

#### split и join

`str.split(delim)` — разбивает строку на массив по заданному разделителю `delim`.
У метода `split` есть необязательный второй числовой аргумент – ограничение на количество элементов в массиве. Если их больше, чем указано, то остаток массива будет отброшен. На практике это редко используется

Вызов `arr.join(glue)` делает в точности противоположное `split`. Он создаёт строку из элементов `arr`, вставляя `glue` между ними.

##### reduce/reduceRight

Если нам нужно перебрать массив – мы можем использовать `forEach`, `for` или `for..of`.

Если нам нужно перебрать массив и вернуть данные для каждого элемента – мы используем `map`.

Методы [arr.reduce](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce) и [arr.reduceRight](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight) похожи на методы выше, но они немного сложнее. Они используются для вычисления какого-нибудь единого значения на основе всего массива.

```js
let value = arr.reduce(function(previousValue, item, index, array) {
  // ...
}, [initial]);
```

Функция применяется по очереди ко всем элементам массива и «переносит» свой результат на следующий вызов.

Аргументы:

- `previousValue` – результат предыдущего вызова этой функции, равен `initial` при первом вызове (если передан `initial`),
- `item` – очередной элемент массива,
- `index` – его индекс,
- `array` – сам массив.

При вызове функции результат её вызова на предыдущем элементе массива передаётся как первый аргумент.

Метод [arr.reduceRight](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight) работает аналогично, но проходит по массиву справа налево.

### Три способа сделть  копия массива

- Так же как и объект, простым циклом.
- Метода `slice`  — `  newArray = oldArray.slice(); `. Вернет поверхностную копию массива.
- Оператор разворота / «оператор расширения» / Spread syntax  (Нововведелние в ES6 для массива ES8 и для объектов ) — spread оператор `...`.  извлекает элементы из массива, представляет их набором значений, а не одним массивом. Можно комбинировать с примитивными значения. Можно записать в новый массив и тогда получится копия. Так же можно копировать и объекты.

### Array.isArray

Массивы не образуют отдельный тип языка. Они основаны на объектах.

Поэтому `typeof` не может отличить простой объект от массива

Но массивы используются настолько часто, что для этого придумали специальный метод: [Array.isArray(value)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray). Он возвращает `true`, если `value` массив, и `false`, если нет.

```js
alert(Array.isArray({})); // false

alert(Array.isArray([])); // true
```

### Большинство методов поддерживают «thisArg»

Почти все методы массива, которые вызывают функции – такие как `find`, `filter`, `map`, за исключением метода `sort`, принимают необязательный параметр `thisArg`.

Этот параметр очень редко используется, но для наиболее полного понимания темы надо.

```js
arr.find(func, thisArg);
arr.filter(func, thisArg);
arr.map(func, thisArg);
// ...
// thisArg - это необязательный последний аргумент
```

Значение параметра `thisArg` становится `this` для `func`.

### Еще несколько

методов достаточно в 99% случаев, но существуют и другие.

- [arr.some(fn)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/some)/[arr.every(fn)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/every) проверяет массив.

  Функция `fn` вызывается для каждого элемента массива аналогично `map`. Если какие-либо/все результаты вызовов являются `true`, то метод возвращает `true`, иначе `false`.

- [arr.fill(value, start, end)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/fill) – заполняет массив повторяющимися `value`, начиная с индекса `start` до `end`.

- [arr.copyWithin(target, start, end)](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin) – копирует свои элементы, начиная со `start` и заканчивая `end`, в _собственную_ позицию `target` (перезаписывает существующие).

---

###### Citation
